package edu.neumont.csc252.test;

import java.awt.image.BufferedImage;
import java.awt.image.DataBufferByte;
import java.awt.image.WritableRaster;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

import org.junit.Test;
import edu.neumont.csc252.FrequencyNode;
import edu.neumont.csc252.HuffmanCompressor;
import edu.neumont.csc252.HuffmanTree;
import edu.neumont.io.Bits;

public class HuffmanTreeTest {

	@Test
	public void test() {

		//String string = "Four score and seven years ago, our forefathers stood upon this native soil and did some cool stuff.";
		File imgPath = new File("jcMessage.png");
		BufferedImage bufferedImage = null;
		try {
			bufferedImage = ImageIO.read(imgPath);
		} catch (IOException e) {
			e.printStackTrace();
		}
		
		WritableRaster raster = bufferedImage .getRaster();
		DataBufferByte data   = (DataBufferByte) raster.getDataBuffer();
		 
		byte[] originalBytes = data.getData();
		
		//HuffmanTree tree = new HuffmanTree(string.getBytes());
		HuffmanTree tree = new HuffmanTree(originalBytes);

		HuffmanCompressor compressor = new HuffmanCompressor();
		
		byte[] bytes = compressor.compress(tree, originalBytes);
		
//		byte[] bytes2 = compressor.decompress(tree, originalBytes.length, bytes);
//		
////		byte[] stringAsBytes = string.getBytes();
////		
////		byte[] bytes = compressor.compress(tree, stringAsBytes);
////		
////		byte[] bytes2 = compressor.decompress(tree, string.length(), bytes);
////		
//		for ( int i = 0; i < originalBytes.length; i++ ) {
//			if ( originalBytes[i] != bytes2[i] ) {
//				System.out.println("FAIL!");
//			}
//		}
////		
//		System.out.println(new String(bytes2));
		
	}
}
