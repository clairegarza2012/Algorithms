package edu.neumont.csc250;

import java.util.HashMap;
import edu.neumont.util.Client;
import edu.neumont.util.QueueableService;
import edu.neumont.util.Server;

public class GroceryStore implements QueueableService{

	private HashMap<Server, ArrayList<Client>> lines = new HashMap<Server, ArrayList<Client>>();
	
	public GroceryStore(int numberOfCashiers){
		for (int i = 0; i < numberOfCashiers; i++){
			Server s = new Server();
			lines.put(s, null);
		}
		
	}
	
	@Override
	public double getAverageClientWaitTime() {

		return 0;
	}

	@Override
	public double getClientWaitTime(Client client) {

		return 0;
	}

	@Override
	public boolean addClient(Client client) {

		if (client == null)
			return false;
		
		Server minServerLine = null;
		for (Server s: lines.keySet()){
			
			if (minServerLine == null){
				minServerLine = new Server();
				minServerLine = s;
			}
			else{
				int minTime = 0;
				ArrayList<Client> minLineClients = lines.get(minServerLine);
				for (int i = 0; i < minLineClients.size(); i++){
					minTime += minLineClients.get(i).getExpectedServiceTime();
				}
				int sTime = 0;
				ArrayList<Client> sLineClients = lines.get(s);
				for (int i = 0; i < sLineClients.size(); i++){
					sTime += sLineClients.get(i).getExpectedServiceTime();
				}
				if (sTime < minTime)
					minServerLine = s;
			}
		}
		
		return lines.get(minServerLine).add(client);
	}

	@Override
	public void advanceMinute() {

		for (Server s : lines.keySet()){
			int remainingTime = s.getCurrentlyServing().servedMinute();
			if (remainingTime == 0){
				s.
				s.setCurrentlyServing(currentlyServing)
			}
		}
	}

}
