package edu.neumont.csc250;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import edu.neumont.csc250.lab4.Book;
import edu.neumont.csc250.lab4.Bookcase;

public class DynamicShelver implements Shelver{

	private int numberOfShelves;
	private int shelfWidth;
	
	@Override
	public void shelveBooks(Bookcase bookcase, List<Book> books) {

		numberOfShelves = bookcase.getNumberOfShelves();
		shelfWidth = bookcase.getShelfWidth();
		
		QuickSorter<Book> sorter = new QuickSorter<Book>();
		sorter.sort(books);
		
		shelveBooksHelper(bookcase, books);
	}

	private void shelveBooksHelper(Bookcase bookcase, List<Book> books) {

		List<Book> soFar = new ArrayList<>();
		HashMap<Integer, MyBookcase> successes = new HashMap<>();

		MyBookcase mostEvenness = successes.get(0);
		
		for (int i = 1; i < successes.size(); i++){
			if (mostEvenness.getBookcase().scoreShelfEvenness() > successes.get(i).getBookcase().scoreShelfEvenness()){
				mostEvenness = successes.get(i);
			}
		}
	
		int bookIndex = 0;
		for (int shelfIndex = 0; shelfIndex < mostEvenness.getBookcase().getNumberOfShelves(); shelfIndex++){

			while(bookIndex < mostEvenness.getBooks().size() && bookcase.getBookshelf(shelfIndex).addBook(mostEvenness.getBooks().get(bookIndex))){
				bookIndex ++;
			}	
		}		
		
	}

}
