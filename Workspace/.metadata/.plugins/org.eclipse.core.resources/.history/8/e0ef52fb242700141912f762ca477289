package edu.neumont.csc252.test;

import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.Arrays;

import org.junit.Test;

import edu.neumont.csc252.HuffmanCompressor;
import edu.neumont.csc252.HuffmanTree;

public class HuffmanTreeTest {

	@Test
	public void test1() throws Exception {
		
		String string = new String(new byte[] { 45, 56, 45, 56, 67, 76, 78 });//"Hello World!";
		byte[] originalBytes = {45, 56, 45, 56, 67, 76, 78 };//Files.readAllBytes(Paths.get("jcMessage.png"));//string.getBytes();
		
		for (int i = 0; i < originalBytes.length; i++){
			System.out.print((char)originalBytes[i]);
		}
		System.out.println();
		
		HuffmanTree tree = new HuffmanTree(originalBytes);
		
		byte[] originalBytes2 = string.getBytes();

		HuffmanCompressor hm = new HuffmanCompressor();
		byte[] compressedBytes = hm.compress(tree, originalBytes2);
		byte[] decompressedBytes = hm.decompress(tree, string.length(), compressedBytes);

		byte[] originalBytes3 = string.getBytes();

		for (int i = 0; i < originalBytes3.length; i++){

			System.out.println(i + ": " + (char)originalBytes3[i] + " " + (char)decompressedBytes[i]);
		}
		
		System.out.println(Arrays.toString(decompressedBytes));
		
		//Files.write(Paths.get("newJcMessage.png"), decompressedBytes);
		
		System.out.println(String.valueOf(originalBytes3));
	}
	
	public void test() {

//		// Reads the bytes from a file and stores into byte[]
//		/* <----------------------------------------------------------------------------> */
//		byte[] compressedBytes = null;
//		
//		try {
//			compressedBytes = Files.readAllBytes(Paths.get("compressed.huff"));
//		} catch (IOException e2) {
//			e2.printStackTrace();
//		}
//		/* <----------------------------------------------------------------------------> */
//		
//		// Decompresses the bytes from above
//		/* <----------------------------------------------------------------------------> */
//		HuffmanTree tree = new HuffmanTree();
//
//		HuffmanCompressor compressor = new HuffmanCompressor();
//
//		byte[] bytes2 = compressor.decompress(tree, 54679, compressedBytes);
//		/* <-----------------------------------------------------------------------------> */
//		
//		System.out.println("Original Length: " + 54679 + " Compressed Length:" + compressedBytes.length);
//		
//		// Attempts to convert the decompressed bytes to an Image
//		/* <-----------------------------------------------------------------------------> */
//		try {
//			Files.write(Paths.get("C:/newImage.jpg"), bytes2);			
//		} catch (Exception e) {
//			e.printStackTrace();
//		}
//		/* <----------------------------------------------------------------------------> */

	}
}
